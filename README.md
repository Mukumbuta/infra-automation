```md
# ğŸš€ Infrastructure as Code (IaC) for Automated Deployment  

This repository contains **Terraform** and **Ansible** configurations to provision and deploy the application automatically.  

## ğŸ“Œ Features  
- **Cloud Infrastructure Provisioning:** Using Terraform  
- **Configuration Management:** Using Ansible  
- **Automated Deployment:** Using Docker & Docker Compose  
- **Single Command Setup:** Deploy the entire infrastructure with one command  
- **Security:** Configures security groups & enables SSL/TLS with Traefik  

## ğŸ“¦ Technology Stack  
- **Terraform** (Infrastructure Provisioning)  
- **Ansible** (Configuration Management)  
- **Docker & Docker Compose** (Containerized Application Deployment)  
- **Traefik** (SSL/TLS & Reverse Proxy)  

## ğŸš€ Deployment Instructions  

### **1ï¸âƒ£ Prerequisites**  
Ensure you have the following installed on your local machine:  
- **Terraform** (`v1.x.x` or later)  
- **Ansible** (`v2.x.x` or later)  
- **AWS CLI** (if using AWS)  
- **Git**  

### **2ï¸âƒ£ Clone the Repository**  
```sh
git clone https://github.com/mukumbuta/infra-automation.git
cd infra-automation/terraform
```

### **3ï¸âƒ£ Initialize Terraform**  
```sh
terraform init
```

### **4ï¸âƒ£ Apply Terraform Configuration**  
Run the following command to provision servers and deploy the application:  

```sh
terraform apply -auto-approve
```

### **5ï¸âƒ£ Access the Application**  
Once deployment is complete, access the application at:  

```
https://teafle.com
```

## ğŸ“‚ Repository Structure  

```
infra-automation/
â”‚â”€â”€ terraform/
â”‚   â”œâ”€â”€ main.tf                # Terraform main configuration
â”‚   â”œâ”€â”€ variables.tf            # Variable definitions
â”‚   â”œâ”€â”€ outputs.tf              # Output variables
â”‚   â”œâ”€â”€ inventory.tpl           # Ansible dynamic inventory template
â”‚   â”œâ”€â”€ security_groups.tf      # Security group rules
â”‚   â”œâ”€â”€ provisioners.tf         # Executes Ansible post-provisioning
â”‚
â”‚â”€â”€ ansible/
â”‚   â”œâ”€â”€ roles/
â”‚   â”‚   â”œâ”€â”€ dependencies/       # Installs Docker, Docker Compose, etc.
â”‚   â”‚   â”œâ”€â”€ deployment/         # Clones repo, runs Docker Compose, sets up SSL
â”‚   â”œâ”€â”€ inventory               # Inventory file generated by Terraform
â”‚   â”œâ”€â”€ playbook.yml            # Main Ansible playbook
â”‚
â”‚â”€â”€ LICENSE
â”‚â”€â”€ README.md
```

## âš™ï¸ Configuration & Environment Variables  

### **Terraform Variables**  
Modify `terraform/variables.tf` to set required values:  
```hcl
variable "aws_region" {
  default = "us-east-1"
}

variable "instance_type" {
  default = "t3.micro"
}

variable "public_key_path" {
  default = "~/.ssh/id_rsa.pub"
}
```

### **Ansible Playbook Configuration**  
The **Ansible playbook** (`ansible/playbook.yml`) performs the following tasks:  
âœ”ï¸ Installs required packages (Docker, Git, etc.)  
âœ”ï¸ Clones the application repository  
âœ”ï¸ Runs `docker compose up -d`  
âœ”ï¸ Configures SSL/TLS with Traefik  

## ğŸ› ï¸ Troubleshooting  

### **Terraform Fails to Provision?**  
- Check if your AWS credentials are configured correctly:  
  ```sh
  aws configure
  ```
- Ensure your public SSH key exists at `~/.ssh/id_rsa.pub`.  

### **Ansible Playbook Fails?**  
- Verify SSH access:  
  ```sh
  ssh ubuntu@your-server-ip
  ```
- Run Ansible with verbose logging:  
  ```sh
  ansible-playbook -i inventory ansible/playbook.yml -vvvv
  ```

## âœ¨ Contributions  
Feel free to contribute by opening **issues** or submitting **pull requests**!  
